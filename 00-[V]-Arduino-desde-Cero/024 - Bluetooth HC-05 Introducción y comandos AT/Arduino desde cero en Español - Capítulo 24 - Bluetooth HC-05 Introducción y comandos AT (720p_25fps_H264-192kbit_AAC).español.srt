1
00:00:01,850 --> 00:00:08,509
hola a todos y bienvenidos al capítulo

2
00:00:04,879 --> 00:00:10,519
24 de arduino desde cero en español

3
00:00:08,509 --> 00:00:12,379
en esta oportunidad aprenderemos a

4
00:00:10,519 --> 00:00:15,589
utilizar el módulo bluetooth

5
00:00:12,380 --> 00:00:18,170
hc 05 el cual nos permitirá establecer

6
00:00:15,589 --> 00:00:20,629
una comunicación inalámbrica entre

7
00:00:18,170 --> 00:00:22,670
arduino y otro dispositivo como por

8
00:00:20,629 --> 00:00:24,890
ejemplo un teléfono móvil todo

9
00:00:22,670 --> 00:00:27,140
dispositivo que tiene identificado el

10
00:00:24,890 --> 00:00:29,420
siguiente logotipo indica que tiene

11
00:00:27,140 --> 00:00:31,519
capacidad de comunicación por bluetooth

12
00:00:29,420 --> 00:00:35,600
se trata de un protocolo de comunicación

13
00:00:31,519 --> 00:00:39,049
por radiofrecuencia en la banda y sm que

14
00:00:35,600 --> 00:00:40,908
opera a una frecuencia de 2.4 giga hertz

15
00:00:39,049 --> 00:00:43,419
y se encuentra optimizado para la

16
00:00:40,908 --> 00:00:46,100
transferencia de datos a corta distancia

17
00:00:43,420 --> 00:00:49,370
generalmente en el rango máximo de entre

18
00:00:46,100 --> 00:00:51,829
5 y 10 metros el consumo de energía es

19
00:00:49,369 --> 00:00:54,138
bajo y lo hace ideal para dispositivos

20
00:00:51,829 --> 00:00:56,198
que funcionan a baterías y es usado

21
00:00:54,139 --> 00:00:58,639
principalmente en teléfonos móviles

22
00:00:56,198 --> 00:01:01,458
periféricos de computadoras como ser

23
00:00:58,639 --> 00:01:03,949
teclados y mouse y también para mandos a

24
00:01:01,459 --> 00:01:06,170
distancia o controles remotos que

25
00:01:03,948 --> 00:01:08,569
reemplazan el clásico sistema infrarrojo

26
00:01:06,170 --> 00:01:11,478
sobre la parte izquierda de pantalla

27
00:01:08,569 --> 00:01:14,599
tenemos una vista frontal del módulo hs

28
00:01:11,478 --> 00:01:17,390
05 en su parte superior en forma de

29
00:01:14,599 --> 00:01:20,119
serpentina se encuentra la antena y más

30
00:01:17,390 --> 00:01:22,460
abajo cerca de los pines de conexión un

31
00:01:20,120 --> 00:01:25,280
pequeño pulsador el cual permite

32
00:01:22,459 --> 00:01:27,799
ingresar al modo de configuración a este

33
00:01:25,280 --> 00:01:30,439
modo de configuración ingresaremos para

34
00:01:27,799 --> 00:01:33,679
entre otras cosas asignarle un nombre al

35
00:01:30,439 --> 00:01:36,259
dispositivo una clave o pin y cuestiones

36
00:01:33,680 --> 00:01:38,509
relacionadas a la comunicación la parte

37
00:01:36,259 --> 00:01:40,609
posterior del módulo se muestra aquí y

38
00:01:38,509 --> 00:01:43,039
tiene las indicaciones sobre la

39
00:01:40,609 --> 00:01:45,709
funcionalidad de cada uno de los 6 pines

40
00:01:43,039 --> 00:01:47,379
de conexión de ellos solo estaremos

41
00:01:45,709 --> 00:01:49,849
utilizando los de alimentación

42
00:01:47,379 --> 00:01:52,129
transmisión y recepción

43
00:01:49,849 --> 00:01:54,649
el módulo se conectará arduino mediante

44
00:01:52,129 --> 00:01:59,000
una comunicación serie a través de dos

45
00:01:54,649 --> 00:02:01,670
pines denominados rx de ite x de estos

46
00:01:59,000 --> 00:02:03,950
pines nos conectaremos a dos pines

47
00:02:01,670 --> 00:02:06,019
digitales de arduino los cuales mediante

48
00:02:03,950 --> 00:02:08,149
una librería especial podremos

49
00:02:06,019 --> 00:02:10,728
establecer los para que funcionen de

50
00:02:08,149 --> 00:02:14,030
manera tal que podamos entablar una

51
00:02:10,729 --> 00:02:17,270
comunicación serie entre arduino y el h

52
00:02:14,030 --> 00:02:20,689
05 en esta imagen se puede ver en color

53
00:02:17,270 --> 00:02:23,689
azul un cable que conecta el pin rx

54
00:02:20,689 --> 00:02:26,300
desde el módulo con el pin digital 11 de

55
00:02:23,689 --> 00:02:28,490
arduino el pin digital 11 lo

56
00:02:26,300 --> 00:02:32,300
estableceremos como pin de transmisión

57
00:02:28,490 --> 00:02:34,520
de datos es decir como tx y aquí aparece

58
00:02:32,300 --> 00:02:37,069
un concepto importante cuando se deben

59
00:02:34,520 --> 00:02:39,890
conectar dos dispositivos mediante una

60
00:02:37,068 --> 00:02:42,139
comunicación serie de dos cables el

61
00:02:39,889 --> 00:02:44,988
correspondiente recepción de uno de

62
00:02:42,139 --> 00:02:47,839
ellos debe ir al de transmisión del otro

63
00:02:44,989 --> 00:02:50,420
es por eso que a propósito se dibujaron

64
00:02:47,840 --> 00:02:53,900
los cables azul y verde cruzados

65
00:02:50,419 --> 00:02:58,069
justamente para denotar que r x desde el

66
00:02:53,900 --> 00:03:02,090
módulo ba de x de arduino y rx de

67
00:02:58,069 --> 00:03:04,250
arduino baaz tx d del módulo si pensamos

68
00:03:02,090 --> 00:03:06,439
en el sentido en que circulan los datos

69
00:03:04,250 --> 00:03:10,009
verás que tiene lógica si por ejemplo

70
00:03:06,439 --> 00:03:12,050
estamos del lado del módulo hc 05 y

71
00:03:10,009 --> 00:03:15,199
debemos transmitir datos lo haremos

72
00:03:12,050 --> 00:03:18,019
mediante su pin tx de ahora esos datos

73
00:03:15,199 --> 00:03:20,030
deben ser recibidos por arduino por eso

74
00:03:18,019 --> 00:03:22,879
irán al rx de

75
00:03:20,030 --> 00:03:25,818
es decir que cuando el módulo transmite

76
00:03:22,879 --> 00:03:28,009
arduino recibe de la misma forma si

77
00:03:25,818 --> 00:03:31,939
ahora arduino es quien debe enviar datos

78
00:03:28,009 --> 00:03:34,969
al módulo lo hará mediante su pin tx el

79
00:03:31,939 --> 00:03:37,759
cual estará conectado a rx desde el

80
00:03:34,969 --> 00:03:40,609
módulo cierto y no envía el módulo

81
00:03:37,759 --> 00:03:42,889
recibe de todas maneras en la sección de

82
00:03:40,610 --> 00:03:45,140
conexionado del módulo arduino

83
00:03:42,889 --> 00:03:47,568
volveremos a ver este tema pero es

84
00:03:45,139 --> 00:03:50,629
importante que quede el concepto de

85
00:03:47,568 --> 00:03:53,780
transmisión del dispositivo la recepción

86
00:03:50,629 --> 00:03:56,150
del otro y viceversa con solo dos cables

87
00:03:53,780 --> 00:03:58,489
ya tenemos nuestra comunicación serie

88
00:03:56,150 --> 00:04:00,560
entre arduino y el módulo pero para que

89
00:03:58,489 --> 00:04:02,830
ambos dispositivos puedan hablar entre

90
00:04:00,560 --> 00:04:06,289
sí se debe hacer mediante un lenguaje

91
00:04:02,830 --> 00:04:08,600
utilizando los llamados comandos ate los

92
00:04:06,289 --> 00:04:10,939
comandos que nos servirán para obtener

93
00:04:08,599 --> 00:04:13,400
información sobre la configuración del

94
00:04:10,939 --> 00:04:15,859
módulo y también establecer valores en

95
00:04:13,400 --> 00:04:18,649
el mismo aquí se muestran los comandos

96
00:04:15,860 --> 00:04:21,139
que utilizaremos en este capítulo hay

97
00:04:18,649 --> 00:04:22,939
más pero estos son los básicos y verás

98
00:04:21,139 --> 00:04:25,668
que es muy intuitivo y fácil de

99
00:04:22,939 --> 00:04:26,600
comprender los comandos hasta siempre y

100
00:04:25,668 --> 00:04:30,560
comienzan con las

101
00:04:26,600 --> 00:04:32,660
letras a it y luego el símbolo de más si

102
00:04:30,560 --> 00:04:35,839
por ejemplo queremos saber el nombre del

103
00:04:32,660 --> 00:04:39,140
dispositivo le enviaremos el comando ate

104
00:04:35,839 --> 00:04:42,079
+ name tal cual se muestra todo en

105
00:04:39,139 --> 00:04:44,180
mayúsculas y sin espacios el comando

106
00:04:42,079 --> 00:04:46,789
requiere de un carácter al final que

107
00:04:44,180 --> 00:04:49,250
será un signo de interrogación si sólo

108
00:04:46,790 --> 00:04:52,069
queremos leer un valor con un signo de

109
00:04:49,250 --> 00:04:54,290
igual si queremos asignarle un valor por

110
00:04:52,069 --> 00:04:56,990
ejemplo si queremos cambiar el nombre

111
00:04:54,290 --> 00:04:59,450
del dispositivo lo importante son estos

112
00:04:56,990 --> 00:05:01,879
comandos que vamos a utilizar y son los

113
00:04:59,449 --> 00:05:06,379
básicos para configurar el módulo el

114
00:05:01,879 --> 00:05:09,379
comando a temas de s w de corresponderá

115
00:05:06,379 --> 00:05:12,170
a la contraseña o pin del módulo cuando

116
00:05:09,379 --> 00:05:14,629
vinculamos un dispositivo como ser el

117
00:05:12,170 --> 00:05:17,300
teléfono móvil con otro mediante

118
00:05:14,629 --> 00:05:19,909
bluetooth lo identificamos mediante su

119
00:05:17,300 --> 00:05:22,430
nombre y luego debemos ingresar el pin

120
00:05:19,910 --> 00:05:26,150
como medida de seguridad así que este

121
00:05:22,430 --> 00:05:28,970
comando a temas ps w de nos permitirá

122
00:05:26,149 --> 00:05:31,288
leer el valor asignado o asignar uno

123
00:05:28,970 --> 00:05:34,619
propio a temas

124
00:05:31,288 --> 00:05:37,199
rt nos permite ver y establecer los

125
00:05:34,619 --> 00:05:39,509
parámetros de comunicación como recién

126
00:05:37,199 --> 00:05:42,449
vimos la comunicación entre arduino y el

127
00:05:39,509 --> 00:05:44,999
módulo es de forma serie así que con

128
00:05:42,449 --> 00:05:47,399
este comando estableceremos la velocidad

129
00:05:44,999 --> 00:05:50,490
de comunicación en baudios o bits por

130
00:05:47,399 --> 00:05:52,829
segundo a temas rol permite establecer

131
00:05:50,490 --> 00:05:55,559
el rol que tendrá el módulo todo

132
00:05:52,829 --> 00:05:56,248
dispositivo bluetooth puede asumir dos

133
00:05:55,559 --> 00:05:59,729
roles

134
00:05:56,249 --> 00:06:02,338
esclavo o maestro estos son términos muy

135
00:05:59,728 --> 00:06:04,338
utilizados en electrónica sobre todo con

136
00:06:02,338 --> 00:06:07,050
la comunicación segi entre dispositivos

137
00:06:04,338 --> 00:06:09,118
diremos que un dispositivo es maestro

138
00:06:07,050 --> 00:06:11,430
cuando es el que se encarga de enviarle

139
00:06:09,119 --> 00:06:14,699
datos a otro dispositivo que será

140
00:06:11,430 --> 00:06:16,709
esclavo y el esclavo solo recibe datos y

141
00:06:14,699 --> 00:06:19,199
comandos del maestro nosotros

142
00:06:16,709 --> 00:06:21,028
utilizaremos el módulo con rol esclavo

143
00:06:19,199 --> 00:06:22,139
ya que el dispositivo que enviara los

144
00:06:21,028 --> 00:06:23,908
comandos

145
00:06:22,139 --> 00:06:26,338
será un teléfono móvil de la misma

146
00:06:23,908 --> 00:06:28,709
manera arduino será el que le envíe al

147
00:06:26,338 --> 00:06:32,009
módulo los comandos a procesar en

148
00:06:28,709 --> 00:06:34,860
resumen con el comando a tema su rol si

149
00:06:32,009 --> 00:06:37,139
le enviamos un cero lo establecemos como

150
00:06:34,860 --> 00:06:39,960
esclavo si le enviamos uno

151
00:06:37,139 --> 00:06:42,030
lo establecemos como maestro un caso en

152
00:06:39,959 --> 00:06:44,788
el que se podría asignar al módulo como

153
00:06:42,029 --> 00:06:46,948
maestro sería por ejemplo si tenemos dos

154
00:06:44,788 --> 00:06:49,348
arduino que deseamos conectar de forma

155
00:06:46,949 --> 00:06:51,538
inalámbrica entre sí un módulo se

156
00:06:49,348 --> 00:06:54,839
establece como maestro y el otro como

157
00:06:51,538 --> 00:06:59,009
esclavo luego tenemos el comando ate más

158
00:06:54,839 --> 00:07:02,008
o rgl el cual permite restablecer al

159
00:06:59,009 --> 00:07:04,229
módulo a su configuración de fábrica es

160
00:07:02,009 --> 00:07:06,870
muy útil si estuvimos haciendo varias

161
00:07:04,228 --> 00:07:09,538
configuraciones y ya le perdimos rastro

162
00:07:06,870 --> 00:07:12,209
enviando este comando el módulo vuelve a

163
00:07:09,538 --> 00:07:14,490
sus valores por defecto finalmente el

164
00:07:12,209 --> 00:07:17,788
último comando que estaremos usando es

165
00:07:14,490 --> 00:07:20,819
ate más receta el cual hace que el

166
00:07:17,788 --> 00:07:22,918
módulo salga del modo de configuración y

167
00:07:20,819 --> 00:07:25,379
pase a modo de usuario no hay que

168
00:07:22,918 --> 00:07:29,068
confundir este comando con el anterior a

169
00:07:25,379 --> 00:07:31,800
ti más o rgl cambia los datos actuales a

170
00:07:29,069 --> 00:07:34,468
los de fábrica a temas reset aunque la

171
00:07:31,800 --> 00:07:36,329
palabra reset suene a borrar todo en

172
00:07:34,468 --> 00:07:38,519
realidad sólo sale del modo de

173
00:07:36,329 --> 00:07:41,098
configuración y el ingreso al modo de

174
00:07:38,519 --> 00:07:41,579
configuración lo veremos en breve cuando

175
00:07:41,098 --> 00:07:43,769
hagamos

176
00:07:41,579 --> 00:07:46,168
practica únicamente en modo

177
00:07:43,769 --> 00:07:48,448
configuración es cuando el módulo puede

178
00:07:46,168 --> 00:07:50,579
recibir comandos a 'the luego de

179
00:07:48,449 --> 00:07:53,968
configurado si lo deja en el modo normal

180
00:07:50,579 --> 00:07:56,339
o también llamado modo de usuario por

181
00:07:53,968 --> 00:07:58,529
ahora la idea es que tengas un vistazo

182
00:07:56,339 --> 00:08:01,649
del lenguaje que estaremos utilizando

183
00:07:58,529 --> 00:08:03,869
para comunicarnos con el htc 05 aquí

184
00:08:01,649 --> 00:08:05,938
debajo vemos algunos ejemplos

185
00:08:03,870 --> 00:08:08,490
dijimos que cuando luego del comando se

186
00:08:05,939 --> 00:08:11,039
le colocaba un signo de interrogación lo

187
00:08:08,490 --> 00:08:13,199
que hacíamos es una lectura del valor no

188
00:08:11,038 --> 00:08:16,468
modifica vamos nada ejemplos serían

189
00:08:13,199 --> 00:08:18,930
además name signo de interrogación que

190
00:08:16,468 --> 00:08:22,978
nos devolverá el nombre actual asignado

191
00:08:18,930 --> 00:08:25,530
o ate más ps w de signo de interrogación

192
00:08:22,978 --> 00:08:27,598
que nos devuelve el valor del pin o

193
00:08:25,529 --> 00:08:30,000
contraseña actual si por el contrario

194
00:08:27,598 --> 00:08:32,309
nuestra intención es cargar un valor

195
00:08:30,000 --> 00:08:35,129
utilizaremos el comando seguido del

196
00:08:32,309 --> 00:08:38,399
símbolo 'igual' y luego del igual el

197
00:08:35,129 --> 00:08:42,509
valor a asignar por ejemplo escribiendo

198
00:08:38,399 --> 00:08:45,419
ate más roll igual 0 establecemos el

199
00:08:42,509 --> 00:08:47,939
módulo como esclavo otro ejemplo sería a

200
00:08:45,419 --> 00:08:52,529
temas que s w

201
00:08:47,940 --> 00:08:56,760
3 4 5 6 asignamos un nuevo pin que será

202
00:08:52,529 --> 00:08:59,699
3 4 5 6 muy bien vamos al circuito de

203
00:08:56,759 --> 00:09:01,919
conexión del módulo será muy simple en

204
00:08:59,700 --> 00:09:04,530
la imagen se muestra la parte trasera

205
00:09:01,919 --> 00:09:07,139
del módulo ya que es aquí donde están

206
00:09:04,529 --> 00:09:10,470
las indicaciones de los pines bsc lo

207
00:09:07,139 --> 00:09:14,879
conectaremos a 5 volts de arduino gene

208
00:09:10,470 --> 00:09:17,340
de del módulo a gene de arduino tx d lo

209
00:09:14,879 --> 00:09:21,330
conectaremos con un cable directo al pin

210
00:09:17,340 --> 00:09:23,910
digital número 10 de arduino y rx desde

211
00:09:21,330 --> 00:09:27,180
el módulo de forma directa al pin

212
00:09:23,909 --> 00:09:30,449
digital número 11 de arduino y eso es

213
00:09:27,179 --> 00:09:33,000
todo para la conexión abrimos el idh de

214
00:09:30,450 --> 00:09:34,980
arduino y vamos a hacer un programa que

215
00:09:33,000 --> 00:09:37,919
nos permitirá configurar el módulo

216
00:09:34,980 --> 00:09:40,320
mediante comandos ate y también recibe

217
00:09:37,919 --> 00:09:42,809
información del módulo mediante el

218
00:09:40,320 --> 00:09:45,660
monitor serial es decir que haremos un

219
00:09:42,809 --> 00:09:48,929
simple programa de chat entre arduino y

220
00:09:45,659 --> 00:09:51,539
el módulo hs 05 lo primero que debemos

221
00:09:48,929 --> 00:09:53,759
hacer es importar una librería que nos

222
00:09:51,539 --> 00:09:54,328
permitirá establecer a 2 pines de

223
00:09:53,759 --> 00:09:57,778
arduino

224
00:09:54,328 --> 00:10:00,238
para que actúen como rx y tx de la

225
00:09:57,778 --> 00:10:02,548
comunicación serie con el módulo la

226
00:10:00,239 --> 00:10:04,589
librería ya viene incorporada en el id

227
00:10:02,548 --> 00:10:07,198
de manera que no es necesario

228
00:10:04,589 --> 00:10:10,319
descargarla simplemente iremos al menú

229
00:10:07,198 --> 00:10:13,758
programa luego a incluir librería y

230
00:10:10,318 --> 00:10:16,828
seleccionamos la opción software serial

231
00:10:13,759 --> 00:10:19,019
importada la librería ya podemos crear

232
00:10:16,828 --> 00:10:21,508
un objeto y todas sus funciones

233
00:10:19,019 --> 00:10:24,209
asociadas lo único que debemos indicar

234
00:10:21,509 --> 00:10:27,509
al momento de la creación del objeto es

235
00:10:24,208 --> 00:10:30,628
los pines que estaremos usando como rx y

236
00:10:27,509 --> 00:10:34,470
tx en arduino nosotros utilizaremos el

237
00:10:30,629 --> 00:10:37,860
pin digital 10 como rx y el pin digital

238
00:10:34,470 --> 00:10:40,949
11 como tx con lo cual con la siguiente

239
00:10:37,860 --> 00:10:48,058
línea logramos el objetivo software

240
00:10:40,948 --> 00:10:51,269
serial me vete entre paréntesis 10,11 el

241
00:10:48,058 --> 00:10:53,850
nombre del objeto será mi vete y ya

242
00:10:51,269 --> 00:10:56,548
podemos usar las funciones asociadas y

243
00:10:53,850 --> 00:10:59,339
así establecer una comunicación serie

244
00:10:56,548 --> 00:11:00,840
entre arduino y el bluetooth en el setup

245
00:10:59,339 --> 00:11:02,880
simplemente inicia

246
00:11:00,840 --> 00:11:06,960
usamos la comunicación del monitor

247
00:11:02,879 --> 00:11:12,360
serial a 9.600 bps como ya lo hicimos en

248
00:11:06,960 --> 00:11:15,120
muchos otros programas serial en 9.600

249
00:11:12,360 --> 00:11:18,539
aquí en el setup aprovechamos a escribir

250
00:11:15,120 --> 00:11:20,700
en el monitor serial el texto listo de

251
00:11:18,539 --> 00:11:22,559
manera de saber que todo se encuentra

252
00:11:20,700 --> 00:11:24,540
inicializa do no es una línea

253
00:11:22,559 --> 00:11:27,239
obligatoria pero lo hacemos simplemente

254
00:11:24,539 --> 00:11:31,230
para que en la ventana del monitor no

255
00:11:27,240 --> 00:11:34,620
inicie vacía sería el punto print ln

256
00:11:31,230 --> 00:11:36,899
entre paréntesis comillas listo ahora

257
00:11:34,620 --> 00:11:39,840
debemos inicializar la comunicación

258
00:11:36,899 --> 00:11:41,730
serie del módulo bluetooth recordad que

259
00:11:39,840 --> 00:11:44,280
ahora estamos trabajando con dos

260
00:11:41,730 --> 00:11:46,649
comunicaciones serie la clásica de

261
00:11:44,279 --> 00:11:48,870
arduino con nuestra computadora y ahora

262
00:11:46,649 --> 00:11:52,319
una nueva que es entre arduino y el

263
00:11:48,870 --> 00:11:54,990
módulo y el objeto me vete mediante la

264
00:11:52,320 --> 00:11:57,930
librería software serial tiene una

265
00:11:54,990 --> 00:12:00,840
función llamada begin donde establecemos

266
00:11:57,929 --> 00:12:03,000
la velocidad de comunicación para este

267
00:12:00,840 --> 00:12:05,370
caso utilizaremos la velocidad que es

268
00:12:03,000 --> 00:12:06,779
por defecto para el módulo que es

269
00:12:05,370 --> 00:12:10,759
superior a los 9

270
00:12:06,779 --> 00:12:14,129
600 que estamos acostumbrados será de 38

271
00:12:10,759 --> 00:12:20,429
400 lo hacemos de la siguiente manera me

272
00:12:14,129 --> 00:12:23,159
vete punto begin 38 400 ahora en el loop

273
00:12:20,429 --> 00:12:25,919
haremos un simple sistema de chat la

274
00:12:23,159 --> 00:12:28,409
idea es utilizar el monitor serial para

275
00:12:25,919 --> 00:12:31,319
enviarle comandos a t al módulo y

276
00:12:28,409 --> 00:12:33,689
recibir por el mismo la respuesta hasta

277
00:12:31,320 --> 00:12:35,910
ahora siempre utilizamos en el monitor

278
00:12:33,690 --> 00:12:39,090
serial para recibir información de

279
00:12:35,909 --> 00:12:40,949
distintos sensores y dispositivos ahora

280
00:12:39,090 --> 00:12:43,530
lo utilizaremos también para enviar

281
00:12:40,950 --> 00:12:47,509
información escribamos la siguiente

282
00:12:43,529 --> 00:12:52,110
línea que ahora lo explico y me vete

283
00:12:47,509 --> 00:12:55,230
punto available la función available del

284
00:12:52,110 --> 00:12:57,269
objeto me ve te devuelve verdadero

285
00:12:55,230 --> 00:13:00,149
cuando hay datos disponibles desde el

286
00:12:57,269 --> 00:13:03,389
módulo es decir que si el módulo no

287
00:13:00,149 --> 00:13:06,779
envía ningún dato arduino la función

288
00:13:03,389 --> 00:13:09,509
retorna falso retornará verdadero cuando

289
00:13:06,779 --> 00:13:12,779
existe información disponible available

290
00:13:09,509 --> 00:13:15,169
en inglés con lo cual entraremos a ésta

291
00:13:12,779 --> 00:13:18,269
y únicamente cuando esa información

292
00:13:15,169 --> 00:13:20,549
disponible desde el módulo si ese es el

293
00:13:18,269 --> 00:13:22,740
caso entonces simplemente queremos

294
00:13:20,549 --> 00:13:26,959
mostrar en el monitor serial y lo

295
00:13:22,740 --> 00:13:31,769
hacemos así serial punto write me vete

296
00:13:26,960 --> 00:13:34,590
punto read la función read lee el dato

297
00:13:31,769 --> 00:13:36,750
que envía el módulo y con sería el punto

298
00:13:34,590 --> 00:13:39,780
wright lo escribimos en el monitor

299
00:13:36,750 --> 00:13:42,539
serial así de simple el bloque if

300
00:13:39,779 --> 00:13:44,939
requiere sólo esta línea verás que no

301
00:13:42,539 --> 00:13:47,969
abrimos llaves luego del if eso es

302
00:13:44,940 --> 00:13:50,760
porque el ifd si tiene una sola línea no

303
00:13:47,970 --> 00:13:54,210
es necesario si dentro del bloque

304
00:13:50,759 --> 00:13:56,639
necesitáramos más de una línea de código

305
00:13:54,210 --> 00:13:59,009
entonces si deberíamos usar las llaves

306
00:13:56,639 --> 00:14:01,350
entonces lo que hicimos aquí es esperar

307
00:13:59,009 --> 00:14:04,049
a que haya algún dato disponible desde

308
00:14:01,350 --> 00:14:06,240
el módulo cuando lo hay lo escribimos en

309
00:14:04,049 --> 00:14:08,579
el monitor serial vamos a dejar un

310
00:14:06,240 --> 00:14:11,039
comentario sobre el if para recordar el

311
00:14:08,580 --> 00:14:14,190
sentido de circulación de los datos con

312
00:14:11,039 --> 00:14:16,990
un par de tabs dejamos espacio y con

313
00:14:14,190 --> 00:14:21,339
barra barra colocamos

314
00:14:16,990 --> 00:14:24,039
vete y envía arduino ahora de forma muy

315
00:14:21,339 --> 00:14:26,170
similar debemos hacer el proceso inverso

316
00:14:24,039 --> 00:14:28,360
cuando haya información disponible en el

317
00:14:26,169 --> 00:14:31,059
monitor serial es decir que nosotros

318
00:14:28,360 --> 00:14:33,430
escribimos un comando ate debemos

319
00:14:31,059 --> 00:14:39,329
enviarlo al módulo y lo hacemos de esta

320
00:14:33,429 --> 00:14:44,500
manera if serial punto available me vete

321
00:14:39,330 --> 00:14:46,629
punto write serial punto ruido lo que

322
00:14:44,500 --> 00:14:49,509
estamos diciendo es que sea información

323
00:14:46,629 --> 00:14:51,879
disponible en el monitor serial la

324
00:14:49,509 --> 00:14:55,088
leeremos con la función ruido y la

325
00:14:51,879 --> 00:14:57,309
escribiremos en el bluetooth el proceso

326
00:14:55,089 --> 00:15:00,130
inverso que hicimos antes también

327
00:14:57,309 --> 00:15:03,208
conviene dejar el comentario del sentido

328
00:15:00,129 --> 00:15:07,870
de la circulación de los datos con lee

329
00:15:03,208 --> 00:15:10,419
arduino y envía a vete y ese es todo el

330
00:15:07,870 --> 00:15:11,709
programa realmente muy simple como

331
00:15:10,419 --> 00:15:14,169
estamos trabajando con dos

332
00:15:11,708 --> 00:15:16,059
comunicaciones series cada vez que nos

333
00:15:14,169 --> 00:15:18,639
referimos a

334
00:15:16,059 --> 00:15:20,919
es la comunicación entre arduino y

335
00:15:18,639 --> 00:15:23,919
nuestra computadora y cada vez que

336
00:15:20,919 --> 00:15:26,709
hacemos referencia a mi vete es la

337
00:15:23,919 --> 00:15:31,179
comunicación entre arduino y el módulo

338
00:15:26,710 --> 00:15:33,820
hc 05 vamos entonces a verificar y subir

339
00:15:31,179 --> 00:15:36,549
el programa por el momento no abras el

340
00:15:33,820 --> 00:15:39,310
monitor serial ya que debemos hacer un

341
00:15:36,549 --> 00:15:42,969
paso previo podrás ver que los leds de

342
00:15:39,309 --> 00:15:45,849
color rojo y azul del módulo hc 05

343
00:15:42,970 --> 00:15:48,279
parpadean de forma rápida esto indica

344
00:15:45,850 --> 00:15:50,409
que está en modo usuario el modo que

345
00:15:48,279 --> 00:15:53,439
permite vincularse con otro dispositivo

346
00:15:50,409 --> 00:15:56,019
por ejemplo con un teléfono móvil pero

347
00:15:53,440 --> 00:15:58,150
nosotros necesitamos configurarlo y para

348
00:15:56,019 --> 00:16:01,090
eso debemos cambiar su modo de operación

349
00:15:58,149 --> 00:16:03,399
al de configuración esto se logra con el

350
00:16:01,090 --> 00:16:05,500
pequeño pulsador sobre la parte frontal

351
00:16:03,399 --> 00:16:08,259
del módulo cerca de los pines de

352
00:16:05,500 --> 00:16:10,720
conexión el detalle es que no basta con

353
00:16:08,259 --> 00:16:12,279
solo presionar el pulsador para ingresar

354
00:16:10,720 --> 00:16:14,560
al modo de configuración

355
00:16:12,279 --> 00:16:17,199
el módulo debe detectar que el pulsador

356
00:16:14,559 --> 00:16:19,809
se encuentra presionado durante los

357
00:16:17,200 --> 00:16:21,939
primeros 5 segundos de encendido si

358
00:16:19,809 --> 00:16:24,518
presionamos el pulsador y pasa

359
00:16:21,938 --> 00:16:27,308
más de 5 segundos desde iniciado el

360
00:16:24,519 --> 00:16:29,349
módulo lo desestimara y no entraremos al

361
00:16:27,308 --> 00:16:32,318
modo de configuración lo que debemos

362
00:16:29,349 --> 00:16:35,019
hacer es un pequeño trabajo a dos manos

363
00:16:32,318 --> 00:16:37,238
y lo digo literalmente para asegurarnos

364
00:16:35,019 --> 00:16:39,698
de que detecta el pulsador presionado

365
00:16:37,239 --> 00:16:42,729
durante los primeros cinco segundos de

366
00:16:39,698 --> 00:16:44,978
encendido primero con una mano yo estaré

367
00:16:42,729 --> 00:16:48,489
usando la izquierda debemos desconectar

368
00:16:44,979 --> 00:16:50,919
el cable de alimentación bcc del módulo

369
00:16:48,489 --> 00:16:53,499
que del lado de arduino serían los 5

370
00:16:50,918 --> 00:16:56,318
volts así que hagamos eso desconectemos

371
00:16:53,499 --> 00:16:58,778
el cable de alimentación gene d lo

372
00:16:56,318 --> 00:17:01,448
dejamos conectado como es de esperar el

373
00:16:58,778 --> 00:17:03,458
módulo hc 05 se apaga

374
00:17:01,448 --> 00:17:05,459
ahora con la otra mano voy a presionar

375
00:17:03,458 --> 00:17:08,708
el pulsador y lo voy a mantener

376
00:17:05,459 --> 00:17:10,538
presionado sin soltar al mismo tiempo

377
00:17:08,709 --> 00:17:12,610
vuelvo a conectar el cable de

378
00:17:10,538 --> 00:17:15,519
alimentación de 5 volts de arduino

379
00:17:12,609 --> 00:17:17,708
siempre con el pulsador presionado de

380
00:17:15,519 --> 00:17:20,409
ahí la necesidad de usar las dos manos

381
00:17:17,709 --> 00:17:22,509
al reconectar la alimentación verás que

382
00:17:20,409 --> 00:17:24,970
el módulo se enciende luego de unos

383
00:17:22,509 --> 00:17:28,069
segundos comenzará a parpadear los leds

384
00:17:24,970 --> 00:17:30,799
pero de forma lenta en ese momento

385
00:17:28,069 --> 00:17:34,220
el pulsador del módulo y así logramos

386
00:17:30,799 --> 00:17:36,019
ingresar al modo de configuración si lo

387
00:17:34,220 --> 00:17:38,509
que estarás pensando y estoy de acuerdo

388
00:17:36,019 --> 00:17:41,029
no es para nada cómodo pero es la única

389
00:17:38,509 --> 00:17:43,430
forma de asegurarnos de que el pulsador

390
00:17:41,029 --> 00:17:46,309
esté presionado durante los primeros

391
00:17:43,430 --> 00:17:48,289
cinco segundos de encendido el módulo si

392
00:17:46,309 --> 00:17:51,230
cuando lo estás haciendo ves que luego

393
00:17:48,289 --> 00:17:54,109
del proceso los leds siguen parpadeando

394
00:17:51,230 --> 00:17:56,259
de forma rápida significa que algo falló

395
00:17:54,109 --> 00:17:58,729
y deberás repetir el procedimiento

396
00:17:56,259 --> 00:18:01,009
recordad que es desconectar la

397
00:17:58,730 --> 00:18:04,069
alimentación del módulo presionar el

398
00:18:01,009 --> 00:18:06,349
pulsador y mantener presionado al mismo

399
00:18:04,069 --> 00:18:09,500
tiempo que reconecta la alimentación del

400
00:18:06,349 --> 00:18:11,779
módulo podrás soltar el pulsador una vez

401
00:18:09,500 --> 00:18:15,140
que los leds parpadean de forma lenta

402
00:18:11,779 --> 00:18:17,119
como se muestra en la imagen ahora si ya

403
00:18:15,140 --> 00:18:19,460
entramos al modo de configuración del

404
00:18:17,119 --> 00:18:22,009
módulo y podremos comenzar a enviar los

405
00:18:19,460 --> 00:18:24,710
comandos a 'the por eso es que en este

406
00:18:22,009 --> 00:18:27,710
momento debes abrir el monitor serial

407
00:18:24,710 --> 00:18:29,840
del id de arduino muy bien luego del

408
00:18:27,710 --> 00:18:32,269
arduo trabajo de ingresar al modo de

409
00:18:29,839 --> 00:18:34,579
configuración prometo que ya todo será

410
00:18:32,269 --> 00:18:36,980
más simple abramos el monitor

411
00:18:34,579 --> 00:18:39,139
y antes que nada es necesario que

412
00:18:36,980 --> 00:18:42,110
verifique la configuración del mismo

413
00:18:39,140 --> 00:18:44,600
sobre la parte baja de la ventana debe

414
00:18:42,109 --> 00:18:47,719
estar habilitada la opción auto scroll

415
00:18:44,599 --> 00:18:50,119
es decir desplazamiento automático

416
00:18:47,720 --> 00:18:55,250
luego en el menú de ajuste de línea debe

417
00:18:50,119 --> 00:18:59,209
estar seleccionado ambos nl y cr y

418
00:18:55,250 --> 00:19:02,359
finalmente la velocidad de 9.600 baudios

419
00:18:59,210 --> 00:19:04,880
en la ventana muestra listo y nada más

420
00:19:02,359 --> 00:19:07,308
eso es correcto ya que no tenemos ningún

421
00:19:04,880 --> 00:19:10,039
dato proveniente del módulo vamos a

422
00:19:07,308 --> 00:19:12,440
enviarle un saludo a ver si nos contesta

423
00:19:10,038 --> 00:19:15,710
esto lo hacemos con el comando ate

424
00:19:12,440 --> 00:19:18,740
solamente con las letras mayúsculas a it

425
00:19:15,710 --> 00:19:21,500
y luego presionamos enter el botón

426
00:19:18,740 --> 00:19:24,649
enviar del monitor serial verás que nos

427
00:19:21,500 --> 00:19:27,099
responde ok genial el módulo nos

428
00:19:24,648 --> 00:19:29,449
respondió significa que estamos en modo

429
00:19:27,099 --> 00:19:31,579
configuración a medida que le enviemos

430
00:19:29,450 --> 00:19:33,278
diferentes comandos a test para

431
00:19:31,579 --> 00:19:35,629
establecer distintas configuraciones

432
00:19:33,278 --> 00:19:38,569
verás que el módulo nos responde

433
00:19:35,630 --> 00:19:40,940
cortésmente con un ok vamos a hacer

434
00:19:38,569 --> 00:19:41,298
algunas consultas para acostumbrarnos a

435
00:19:40,940 --> 00:19:44,149
los

436
00:19:41,298 --> 00:19:47,418
2 te vamos a consultar por el nombre del

437
00:19:44,148 --> 00:19:50,298
módulo esto lo hacemos con temas name

438
00:19:47,419 --> 00:19:52,610
signo de interrogación y presionamos

439
00:19:50,298 --> 00:19:54,950
enter o el botón enviar

440
00:19:52,609 --> 00:19:57,168
del monitor serial en mi caso no

441
00:19:54,950 --> 00:20:00,048
responde nada no es que se haya enojado

442
00:19:57,169 --> 00:20:02,360
conmigo por este módulo particular no

443
00:20:00,048 --> 00:20:04,069
responde a consultas de nombre si bien

444
00:20:02,359 --> 00:20:06,618
en la documentación se indica que

445
00:20:04,069 --> 00:20:09,230
debería hacerlo en mi caso no lo hace

446
00:20:06,618 --> 00:20:12,709
quizás en el tuyo si existen diversas

447
00:20:09,230 --> 00:20:15,259
versiones del módulo hc 0 5 en mi caso

448
00:20:12,710 --> 00:20:17,659
no responde a esta consulta pero no es

449
00:20:15,259 --> 00:20:20,389
un problema ya que luego le asignaremos

450
00:20:17,659 --> 00:20:22,759
un nombre personalizado si en tu caso

451
00:20:20,388 --> 00:20:25,278
responde verás el nombre que tiene

452
00:20:22,759 --> 00:20:29,659
asignado veamos cuál es el pin que tiene

453
00:20:25,278 --> 00:20:34,099
asignado esto lo hacemos con at&amp;t más ps

454
00:20:29,659 --> 00:20:39,559
w de signo de interrogación devuelve más

455
00:20:34,099 --> 00:20:43,638
ps w de 2 puntos 1 2 3 4 ok

456
00:20:39,558 --> 00:20:46,009
queda claro que el pin asignado es 1234

457
00:20:43,638 --> 00:20:48,049
puede ser distinto en tu caso ahora

458
00:20:46,009 --> 00:20:50,809
estamos sólo consultando por

459
00:20:48,049 --> 00:20:55,549
que tiene cargado hagamos otra consulta

460
00:20:50,809 --> 00:20:59,720
para ver su rol con ate más rol signo de

461
00:20:55,549 --> 00:21:02,180
interrogación devuelve más rol dos

462
00:20:59,720 --> 00:21:05,480
puntos 0 ok

463
00:21:02,180 --> 00:21:08,150
un valor de 0 en el rol significa que

464
00:21:05,480 --> 00:21:10,640
está como esclavo finalmente hagamos una

465
00:21:08,150 --> 00:21:15,019
última consulta y nos vamos a la etapa

466
00:21:10,640 --> 00:21:19,880
de configuración escribamos ate más ua

467
00:21:15,019 --> 00:21:20,869
rt signo de interrogación y devuelve más

468
00:21:19,880 --> 00:21:29,930
ua

469
00:21:20,869 --> 00:21:33,469
rt dos puntos 38 400 00 que nos indica

470
00:21:29,930 --> 00:21:36,019
que está configurado a 38 a 1400 baudios

471
00:21:33,470 --> 00:21:39,079
verás que luego hay dos valores que

472
00:21:36,019 --> 00:21:40,940
están en cero separados por comas esos

473
00:21:39,079 --> 00:21:43,009
son valores específicos de la

474
00:21:40,940 --> 00:21:45,440
comunicación serie que no estaremos

475
00:21:43,009 --> 00:21:47,900
utilizando con lo cual no le prestes

476
00:21:45,440 --> 00:21:50,570
atención el primer valor es el que

477
00:21:47,900 --> 00:21:52,009
importa muy bien la idea es cargarle

478
00:21:50,569 --> 00:21:54,559
valores personalizados

479
00:21:52,009 --> 00:21:56,799
algunos ya están correctos otros los

480
00:21:54,559 --> 00:21:59,329
cambiaremos lo mejor es comenzar

481
00:21:56,799 --> 00:22:01,609
restableciendo los valores de fábrica y

482
00:21:59,329 --> 00:22:03,740
luego los cambiaremos podrás pensar que

483
00:22:01,609 --> 00:22:05,779
si el módulo es nuevo entonces ya

484
00:22:03,740 --> 00:22:08,089
debería estar con los valores de fábrica

485
00:22:05,779 --> 00:22:11,240
pero no siempre es el caso como medida

486
00:22:08,089 --> 00:22:14,059
de precaución utilicemos el comando ate

487
00:22:11,240 --> 00:22:18,019
+ o hereje

488
00:22:14,059 --> 00:22:20,990
y nos devolverá ok ahora sí comencemos

489
00:22:18,019 --> 00:22:23,119
con el nombre el nombre del módulo será

490
00:22:20,990 --> 00:22:25,579
el que luego será visible desde el

491
00:22:23,119 --> 00:22:28,189
dispositivo de donde lo vincule haremos

492
00:22:25,579 --> 00:22:31,579
un teléfono móvil por ejemplo vamos a

493
00:22:28,190 --> 00:22:33,890
llamarlo me vete todo en mayúsculas ya

494
00:22:31,579 --> 00:22:35,960
que usamos ese nombre en la programación

495
00:22:33,890 --> 00:22:42,200
podríamos asignarle el nombre que

496
00:22:35,960 --> 00:22:43,610
queramos ate + name igual me vete nos

497
00:22:42,200 --> 00:22:46,279
responderá ok

498
00:22:43,609 --> 00:22:47,179
indicando que tomó el cambio de forma

499
00:22:46,279 --> 00:22:50,299
correcta

500
00:22:47,180 --> 00:22:52,070
ahora asignamos un pin o contraseña

501
00:22:50,299 --> 00:22:56,359
yo estaré usando el valor por defecto

502
00:22:52,069 --> 00:23:00,710
que es 1234 pero podrás asignar el que

503
00:22:56,359 --> 00:23:05,809
quieras lo hacemos con ate más de s

504
00:23:00,710 --> 00:23:09,710
wv de igual 1234 vamos a configurarlo

505
00:23:05,809 --> 00:23:13,909
con el rol esclavo con at&amp;t más roll

506
00:23:09,710 --> 00:23:18,610
igual 0 y finalmente establecemos la

507
00:23:13,910 --> 00:23:28,210
velocidad de comunicación en 38.400 bp

508
00:23:18,609 --> 00:23:30,939
a ti más a rt igual 38 400 0 0

509
00:23:28,210 --> 00:23:37,029
debes colocarlo de esa misma forma la

510
00:23:30,940 --> 00:23:39,308
velocidad de 38 a 1400 y luego 0 0 y ya

511
00:23:37,029 --> 00:23:42,369
lo tenemos todo configurado lo que nos

512
00:23:39,308 --> 00:23:44,500
resta es salir del modo configuración de

513
00:23:42,369 --> 00:23:46,629
manera que esté disponible para ser

514
00:23:44,500 --> 00:23:50,380
vinculado desde un dispositivo externo

515
00:23:46,630 --> 00:23:53,200
para eso usaremos el comando ate más

516
00:23:50,380 --> 00:23:55,929
reset ni bien apliques este último

517
00:23:53,200 --> 00:23:58,509
comando podrás ver que los leds vuelven

518
00:23:55,929 --> 00:24:00,640
a parpadear de forma rápida indicando

519
00:23:58,509 --> 00:24:03,308
que ya se encuentra en modo usuario

520
00:24:00,640 --> 00:24:05,530
justamente por ese motivo es que ya no

521
00:24:03,308 --> 00:24:08,740
podemos enviarle nuevos comandos a te

522
00:24:05,529 --> 00:24:11,619
podrás verificar que si escribís a t en

523
00:24:08,740 --> 00:24:13,329
el monitor serial no hay respuesta para

524
00:24:11,619 --> 00:24:15,849
verificar que el módulo tiene todo

525
00:24:13,329 --> 00:24:18,369
configurado debemos vincularlo con otro

526
00:24:15,849 --> 00:24:20,769
dispositivo con capacidad bluetooth lo

527
00:24:18,369 --> 00:24:22,989
podremos hacer fácilmente con nuestro

528
00:24:20,769 --> 00:24:24,859
teléfono móvil no importa el sistema

529
00:24:22,990 --> 00:24:26,929
operativo que corra en el sí

530
00:24:24,859 --> 00:24:29,149
tiene capacidad bluetooth podremos

531
00:24:26,929 --> 00:24:31,090
vincularlo en pantalla te estaré

532
00:24:29,150 --> 00:24:34,040
mostrando a mi teléfono android

533
00:24:31,089 --> 00:24:37,220
ingresando a la opción configuración y

534
00:24:34,039 --> 00:24:39,319
luego bluetooth podremos encenderlo si

535
00:24:37,220 --> 00:24:41,259
es que lo tenemos apagado si está

536
00:24:39,319 --> 00:24:43,339
encendido entonces buscar

537
00:24:41,259 --> 00:24:45,859
automáticamente por dispositivos

538
00:24:43,339 --> 00:24:49,099
disponibles deberemos ver luego de

539
00:24:45,859 --> 00:24:52,849
algunos segundos que nos aparece mi vete

540
00:24:49,099 --> 00:24:55,490
e inmediatamente un diálogo solicitando

541
00:24:52,849 --> 00:24:57,439
el pin por ahora vamos bien detecto

542
00:24:55,490 --> 00:24:59,269
nuestro módulo correctamente

543
00:24:57,440 --> 00:25:04,190
ahora coloquemos el pin que asignamos

544
00:24:59,269 --> 00:25:07,190
durante la configuración que es 1234 y

545
00:25:04,190 --> 00:25:10,370
listo ya están vinculados nuestro módulo

546
00:25:07,190 --> 00:25:12,830
hs 0 5 con el teléfono móvil

547
00:25:10,369 --> 00:25:15,829
verás que ahora el parpadeo de los leds

548
00:25:12,829 --> 00:25:17,599
del módulo es distinto para no extender

549
00:25:15,829 --> 00:25:19,548
demasiado este capítulo

550
00:25:17,599 --> 00:25:22,668
vamos a dejarlo aquí ya logramos

551
00:25:19,548 --> 00:25:24,558
vincularlo lo cual es importante para lo

552
00:25:22,669 --> 00:25:27,830
que haremos en el próximo capítulo que

553
00:25:24,558 --> 00:25:30,019
será instalar una app en el teléfono

554
00:25:27,829 --> 00:25:30,769
mediante la cual podemos enviar la

555
00:25:30,019 --> 00:25:34,220
información

556
00:25:30,769 --> 00:25:36,950
al hc 05 y luego por programación desde

557
00:25:34,220 --> 00:25:39,650
arduino asignaremos diferentes acciones

558
00:25:36,950 --> 00:25:42,080
en base a la información recibida para

559
00:25:39,650 --> 00:25:44,720
recapitular hablamos de la comunicación

560
00:25:42,079 --> 00:25:47,419
inalámbrica por bluetooth conectamos el

561
00:25:44,720 --> 00:25:50,299
módulo arduino ingresamos al modo de

562
00:25:47,420 --> 00:25:52,970
configuración y mediante comandos a 'the

563
00:25:50,299 --> 00:25:56,119
pudimos ver y establecer distintos

564
00:25:52,970 --> 00:25:58,850
parámetros finalmente logramos vincular

565
00:25:56,119 --> 00:26:01,159
un teléfono móvil al módulo de forma

566
00:25:58,849 --> 00:26:03,949
satisfactoria eso es todo por este

567
00:26:01,160 --> 00:26:06,350
capítulo te espero en el próximo para

568
00:26:03,950 --> 00:26:08,660
seguir el trabajo iniciado en este y ver

569
00:26:06,349 --> 00:26:12,889
aplicaciones prácticas para el uso de

570
00:26:08,660 --> 00:26:14,570
bluetooth con el hc 05 como siempre te

571
00:26:12,890 --> 00:26:16,730
pido te suscribas para recibir

572
00:26:14,569 --> 00:26:17,509
notificaciones y por cualquier duda o

573
00:26:16,730 --> 00:26:19,849
comentario

574
00:26:17,509 --> 00:26:24,789
lo podés hacer debajo que con gusto te

575
00:26:19,849 --> 00:26:24,789
responderé chao y hasta la próxima

